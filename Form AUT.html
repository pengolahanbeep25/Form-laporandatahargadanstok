<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Form Input Data Usaha Tani</title>

<style>
    body {
        font-family: Arial, sans-serif;
        padding: 20px;
        background: #f0f0f0;
    }
    .container {
        max-width: 850px;
        background: white;
        padding: 20px;
        margin: auto;
        border-radius: 10px;
        box-shadow: 0 0 10px #999;
    }
    label {
        font-weight: bold;
        margin-top: 10px;
        display: block;
    }
    input, select {
        width: 100%;
        padding: 10px;
        margin-top: 5px;
        border-radius: 6px;
        border: 1px solid #aaa;
    }
    .alat-item {
        background: #fafafa;
        padding: 10px;
        margin-bottom: 10px;
        border-radius: 6px;
        border: 1px solid #ddd;
    }
    button {
        margin-top: 15px;
        padding: 12px;
        width: 100%;
        background: green;
        color: white;
        border: 0;
        border-radius: 6px;
        font-size: 18px;
    }
</style>
</head>
<body>

<div class="container">
<h2>Form Input Usaha Tani</h2>

<form id="mainForm">

    <label>Nama Petani</label>
    <input type="text" name="Nama_Petani" required>

    <label>No HP</label>
    <input type="text" name="No_HP" required>

    <label>Nama Kelompok</label>
    <input type="text" name="Nama_Kelompok">

    <label>Provinsi</label>
    <input type="text" name="Provinsi" value="Riau">

    <label>Kabupaten</label>
    <input type="text" name="Kabupaten" value="Indragiri Hilir">

    <label>Kecamatan</label>
    <input type="text" name="Kecamatan">

    <label>Desa</label>
    <input type="text" name="Desa">

    <hr><h3>Alat & Bahan</h3>

    <div id="alatContainer"></div>

    <button type="submit">Kirim Data</button>
</form>
</div>

<script>
/* ===============================
   1. LIST ALAT – BISA KAU TAMBAH
   =============================== */
const alatList = [
    "Cangkul",
    "Parang",
    "Traktor",
    "Pupuk_Urea",
    "Pupuk_NPK",
    "Pestisida",
    "Benih_Padi",
    "Sabit",
    "Handsprit",
    "Herbisida"
];

/* ======================================
   2. GENERATE FIELD ALAT DENGAN NAME OTOMATIS
   ====================================== */
function generateAlatFields() {
    const container = document.getElementById("alatContainer");

    alatList.forEach(nama => {
        const item = document.createElement("div");
        item.className = "alat-item";

        item.innerHTML = `
            <label>${nama.replace(/_/g, " ")}</label>

            Volume:
            <input type="number" name="${nama}_vol" min="0">

            Harga Satuan:
            <input type="number" name="${nama}_harga" min="0">

            Total:
            <input type="number" name="${nama}_total" min="0">
        `;

        container.appendChild(item);
    });
}
generateAlatFields();

/* ================================
   3. KIRIM DATA KE GOOGLE SHEETS
   ================================ */

const scriptURL = "https://script.google.com/macros/s/AKfycbz5Y0Smj5iuQsRv-62HjsfiI0D-K46k6n0BVf-oNC1xTqfcSfKC4MdXwG0zzQaD0H5U/exec";  // ← GANTI BAGIAN INI
const form = document.getElementById("mainForm");

form.addEventListener("submit", e => {
    e.preventDefault();

    const data = new FormData(form);

    fetch(scriptURL, { method: "POST", body: data })
        .then(res => {
            alert("Data berhasil dikirim!");
            form.reset();
        })
        .catch(err => {
            alert("Gagal mengirim! Cek koneksi atau Apps Script");
            console.error(err);
        });
});
</script>

</body>
</html>
